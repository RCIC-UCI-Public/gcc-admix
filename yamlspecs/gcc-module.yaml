# Builds the module for gcc
!include gcc.yaml
!include rcic-module.yaml
---
- package: GCC Module
  pkgname: "{{name}}_{{version}}-module"
  src_tarball: None
  no_src_dir: True
  category: COMPILERS
  release: 3
  module:
    lib: lib64
    setenv:
      - GCC_INSTALL_PREFIX {{prefix}}
      - CPP {{prefix}}/bin/cpp
      - CC {{prefix}}/bin/gcc
      - CXX {{prefix}}/bin/g++
      - OBJC {{prefix}}/bin/gcc
      - OBJCXX {{prefix}}/bin/g++
      - FC  {{prefix}}/bin/gfortran
      - F77 {{prefix}}/bin/gfortran
      - F90 {{prefix}}/bin/gfortran
    prepend_path:
      - PATH {{root}}/bin
      - MANPATH {{root}}/share/man
      - PKG_CONFIG_PATH {{root}}/{{module.lib}}/pkgconfig
      - LD_LIBRARY_PATH {{prefix}}/lib/gcc/x86_64-pc-linux-gnu/{{gcc_version}}
      - LD_LIBRARY_PATH {{prefix}}/lib
      - LD_LIBRARY_PATH {{root}}/{{module.lib}}
      - -d " " CPPFLAGS -I{{root}}/include
      - -d " " LDFLAGS "-L{{prefix}}/lib/gcc/x86_64-pc-linux-gnu/{{gcc_version}} -Wl,-rpath,{{prefix}}/lib/gcc/x86_64-pc-linux-gnu/{{gcc_version}}"
      - -d " " LDFLAGS "-L{{prefix}}/lib -Wl,-rpath,{{prefix}}/lib"
      - -d " " LDFLAGS "-L{{root}}/{{module.lib}} -Wl,-rpath,{{root}}/{{module.lib}}"
